{"ast":null,"code":"import _regeneratorRuntime from\"/home/mauro/Escritorio/React/react-tasks/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/mauro/Escritorio/React/react-tasks/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/mauro/Escritorio/React/react-tasks/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useReducer}from'react';import TaskContext from'./taskContext';import TaskReducer from'./taskReducer';import{PROJECT_TASKS,NEW_TASK,VALIDATE_TASK,DELETE_TASK,ACTUAL_TASK,UPDATE_TASK}from'../../types';import axiosClient from'../../config/axios';var TaskState=function TaskState(props){var initialState={projectTasks:[],taskError:false,actualTask:null};var _useReducer=useReducer(TaskReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var getProjectTasks=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(project){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axiosClient.get('api/tasks',{params:{project:project}});case 3:response=_context.sent;dispatch({type:PROJECT_TASKS,payload:response.data.tasks});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getProjectTasks(_x){return _ref.apply(this,arguments);};}();var newTask=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(task){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axiosClient.post('/api/tasks',task);case 3:response=_context2.sent;dispatch({type:NEW_TASK,payload:response.data});_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function newTask(_x2){return _ref2.apply(this,arguments);};}();var validateTask=function validateTask(){dispatch({type:VALIDATE_TASK});};var deleteTask=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id,project){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axiosClient.delete(\"/api/tasks/\".concat(id),{params:{project:project}});case 3:dispatch({type:DELETE_TASK,payload:id});_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function deleteTask(_x3,_x4){return _ref3.apply(this,arguments);};}();var updateTask=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(task){var response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axiosClient.put(\"/api/tasks/\".concat(task._id),task);case 3:response=_context4.sent;console.log(response.data);dispatch({type:UPDATE_TASK,payload:response.data.taskExists});_context4.next=11;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[0,8]]);}));return function updateTask(_x5){return _ref4.apply(this,arguments);};}();var getActualTask=function getActualTask(task){dispatch({type:ACTUAL_TASK,payload:task});};return/*#__PURE__*/React.createElement(TaskContext.Provider,{value:{projectTasks:state.projectTasks,taskError:state.taskError,actualTask:state.actualTask,getProjectTasks:getProjectTasks,newTask:newTask,validateTask:validateTask,deleteTask:deleteTask,getActualTask:getActualTask,updateTask:updateTask}},props.children);};export default TaskState;","map":{"version":3,"sources":["/home/mauro/Escritorio/React/react-tasks/client/src/context/tasks/taskState.js"],"names":["React","useReducer","TaskContext","TaskReducer","PROJECT_TASKS","NEW_TASK","VALIDATE_TASK","DELETE_TASK","ACTUAL_TASK","UPDATE_TASK","axiosClient","TaskState","props","initialState","projectTasks","taskError","actualTask","state","dispatch","getProjectTasks","project","get","params","response","type","payload","data","tasks","console","log","newTask","task","post","validateTask","deleteTask","id","delete","updateTask","put","_id","taskExists","getActualTask","children"],"mappings":"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","sourcesContent":["import React, {useReducer} from 'react';\nimport TaskContext from './taskContext';\nimport TaskReducer from './taskReducer';\nimport { PROJECT_TASKS,\n         NEW_TASK, \n         VALIDATE_TASK, \n         DELETE_TASK,\n         ACTUAL_TASK,\n         UPDATE_TASK\n        } from '../../types';\nimport axiosClient from '../../config/axios';\n\nconst TaskState = props => {\n    \n    const initialState = {\n        projectTasks: [],\n        taskError: false, \n        actualTask: null\n    }\n\n    const [state, dispatch] = useReducer(TaskReducer, initialState);\n\n    const getProjectTasks = async project => {\n        try {\n            const response = await axiosClient.get('api/tasks', { params: { project }})\n            dispatch({\n                type: PROJECT_TASKS,\n                payload: response.data.tasks\n            })\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    const newTask = async task => {\n        try {\n            const response = await axiosClient.post('/api/tasks', task);\n            dispatch({\n                type: NEW_TASK,\n                payload: response.data\n            })\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    const validateTask = () => {\n        dispatch({\n            type: VALIDATE_TASK\n        })\n    }\n\n    const deleteTask = async (id, project) => {\n        try {\n            await axiosClient.delete(`/api/tasks/${id}`, { params: { project }});\n            dispatch({\n                type: DELETE_TASK,\n                payload: id\n            })\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    const updateTask = async task => {\n        try {\n            const response = await axiosClient.put(`/api/tasks/${task._id}`, task);\n            console.log(response.data);\n            dispatch({\n                type: UPDATE_TASK,\n                payload: response.data.taskExists\n            })\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    const getActualTask = task => {\n        dispatch({\n            type: ACTUAL_TASK,\n            payload: task\n        })\n    }\n\n\n\n    return (\n        <TaskContext.Provider\n            value={{\n                projectTasks: state.projectTasks,\n                taskError: state.taskError,\n                actualTask: state.actualTask,\n                getProjectTasks,\n                newTask,\n                validateTask,\n                deleteTask,\n                getActualTask,\n                updateTask\n            }}\n        >\n            {props.children}\n        </TaskContext.Provider>\n    )\n\n}\n\nexport default TaskState;"]},"metadata":{},"sourceType":"module"}