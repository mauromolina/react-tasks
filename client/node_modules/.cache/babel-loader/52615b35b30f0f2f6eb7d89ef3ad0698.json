{"ast":null,"code":"import _regeneratorRuntime from\"/home/mauro/Escritorio/React/react-tasks/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/mauro/Escritorio/React/react-tasks/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/mauro/Escritorio/React/react-tasks/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useReducer}from'react';import projectContext from'./projectContext';import projectReducer from'./projectReducer';import axiosClient from'../../config/axios';import{FORM_PROJECT,GET_PROJECTS,NEW_PROJECT,VALIDATE_FORM,ACTUAL_PROJECT,DELETE_PROJECT,PROJECT_ERROR}from'../../types';var ProjectState=function ProjectState(props){var initialState={projects:[],form:false,error:false,actualProject:null,msg:null};// dispatch para ejecutar las acciones\nvar _useReducer=useReducer(projectReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];// funciones para el crud\nvar toggleForm=function toggleForm(status){dispatch({type:FORM_PROJECT,payload:status});};var getProjects=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axiosClient.get('/api/projects');case 3:response=_context.sent;dispatch({type:GET_PROJECTS,payload:response.data.projects});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getProjects(){return _ref.apply(this,arguments);};}();var newProject=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(project){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axiosClient.post('/api/projects',project);case 3:response=_context2.sent;dispatch({type:NEW_PROJECT,payload:response.data});_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function newProject(_x){return _ref2.apply(this,arguments);};}();var showErrorForm=function showErrorForm(){dispatch({type:VALIDATE_FORM});};var getActualProject=function getActualProject(id){dispatch({type:ACTUAL_PROJECT,payload:id});};var deleteProject=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){var alert;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axiosClient.delete(\"api/projects/\".concat(id));case 3:dispatch({type:DELETE_PROJECT,payload:id});_context3.next=10;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);alert={msg:'Hubo un error',category:'alerta-error'};dispatch({type:PROJECT_ERROR,payload:alert});case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function deleteProject(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(projectContext.Provider,{value:{projects:state.projects,form:state.form,error:state.error,actualProject:state.actualProject,msg:state.msg,toggleForm:toggleForm,getProjects:getProjects,newProject:newProject,showErrorForm:showErrorForm,getActualProject:getActualProject,deleteProject:deleteProject}},props.children);};export default ProjectState;","map":{"version":3,"sources":["/home/mauro/Escritorio/React/react-tasks/client/src/context/projects/projectState.js"],"names":["React","useReducer","projectContext","projectReducer","axiosClient","FORM_PROJECT","GET_PROJECTS","NEW_PROJECT","VALIDATE_FORM","ACTUAL_PROJECT","DELETE_PROJECT","PROJECT_ERROR","ProjectState","props","initialState","projects","form","error","actualProject","msg","state","dispatch","toggleForm","status","type","payload","getProjects","get","response","data","console","log","newProject","project","post","showErrorForm","getActualProject","id","deleteProject","delete","alert","category","children"],"mappings":"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","sourcesContent":["import React, {useReducer} from 'react';\nimport projectContext from './projectContext';\nimport projectReducer from './projectReducer';\nimport axiosClient from '../../config/axios';\nimport { FORM_PROJECT,\n         GET_PROJECTS,\n         NEW_PROJECT, \n         VALIDATE_FORM, \n         ACTUAL_PROJECT, \n         DELETE_PROJECT, \n         PROJECT_ERROR } from '../../types';\n\n\nconst ProjectState = props => {\n\n    const initialState = {\n        projects: [],\n        form: false,\n        error: false,\n        actualProject: null,\n        msg: null\n    }\n\n    // dispatch para ejecutar las acciones\n    const [state, dispatch] = useReducer(projectReducer, initialState);\n\n    // funciones para el crud\n    const toggleForm = (status) => {\n        dispatch({\n            type: FORM_PROJECT,\n            payload: status\n        })\n    }\n\n    const getProjects = async () => {\n        try {\n            const response = await axiosClient.get('/api/projects')\n            dispatch({\n                type: GET_PROJECTS,\n                payload: response.data.projects\n            })\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    const newProject = async (project) => {\n        try {\n            const response = await axiosClient.post('/api/projects', project);\n            dispatch({\n                type: NEW_PROJECT,\n                payload: response.data\n            });\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    const showErrorForm = () => {\n        dispatch({\n            type: VALIDATE_FORM\n        })\n    }\n\n    const getActualProject = (id) => {\n        dispatch({\n            type: ACTUAL_PROJECT,\n            payload: id\n        })\n    }\n\n    const deleteProject = async id => {\n        try {\n            await axiosClient.delete(`api/projects/${id}`);\n            dispatch({\n                type: DELETE_PROJECT,\n                payload: id\n            })\n        } catch (error) {\n            const alert = {\n                msg: 'Hubo un error',\n                category: 'alerta-error'\n            }\n            dispatch({\n                type: PROJECT_ERROR,\n                payload: alert\n            })\n        }\n    }\n\n    return (\n        <projectContext.Provider\n            value={{\n                projects: state.projects,\n                form: state.form,\n                error: state.error,\n                actualProject: state.actualProject,\n                msg: state.msg,\n                toggleForm,\n                getProjects,\n                newProject,\n                showErrorForm,\n                getActualProject,\n                deleteProject\n            }}\n        >\n            {props.children}\n        </projectContext.Provider>\n    )\n}\n\nexport default ProjectState"]},"metadata":{},"sourceType":"module"}