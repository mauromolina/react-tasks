(this.webpackJsonptasks=this.webpackJsonptasks||[]).push([[0],{38:function(e,t,a){e.exports=a(67)},43:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),o=a.n(c),l=(a(43),a(14)),s=a(5),u=a(12),i=a(1),m=a(2),p=Object(n.createContext)(),d=Object(n.createContext)(),b=function(e){var t=Object(n.useContext)(d),a=t.alert,c=t.showAlert,o=Object(n.useContext)(p),s=o.msg,b=o.auth,E=o.logIn;Object(n.useEffect)((function(){b&&e.history.push("/projects"),s&&c(s.msg,s.category)}),[s,b,e.history]);var f=Object(n.useState)({email:"",password:""}),j=Object(m.a)(f,2),O=j[0],v=j[1],g=O.email,h=O.password,y=function(e){v(Object(i.a)(Object(i.a)({},O),{},Object(u.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"form-usuario"},a?r.a.createElement("div",{className:"alerta ".concat(a.category)},a.msg):null,r.a.createElement("div",{className:"contenedor-form sombra-dark"},r.a.createElement("h1",null,"Iniciar Sesi\xf3n"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==g.trim()&&""!==h.trim()||c("Todos los campos son obligatorios","alerta-error"),E({email:g,password:h})}},r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"E-mail",value:g,onChange:y})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"password"},"Contrase\xf1a"),r.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Contrase\xf1a",value:h,onChange:y})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:"Iniciar Sesi\xf3n"}))),r.a.createElement(l.b,{to:"/new-account",className:"enlace-cuenta"},"Obtener Cuenta")))},E=function(e){var t=Object(n.useContext)(d),a=t.alert,c=t.showAlert,o=Object(n.useContext)(p),s=o.msg,b=o.auth,E=o.signInUser;Object(n.useEffect)((function(){b&&e.history.push("/projects"),s&&c(s.msg,s.category)}),[s,b,e.history]);var f=Object(n.useState)({name:"",email:"",password:"",confirm:""}),j=Object(m.a)(f,2),O=j[0],v=j[1],g=O.email,h=O.password,y=O.name,k=O.confirm,T=function(e){v(Object(i.a)(Object(i.a)({},O),{},Object(u.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"form-usuario"},a?r.a.createElement("div",{className:"alerta ".concat(a.category)},a.msg):null,r.a.createElement("div",{className:"contenedor-form sombra-dark"},r.a.createElement("h1",null,"Nueva Cuenta"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==y.trim()&&""!==g.trim()&&""!==h.trim()&&""!==k.trim()?h.length<6?c("La contrase\xf1a debe contener como m\xednimo 6 caracteres","alerta-error"):h===k?E({name:y,email:g,password:h}):c("Las contrase\xf1as no coinciden","alerta-error"):c("Todos los campos son obligatorios","alerta-error")}},r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"name"},"Nombre"),r.a.createElement("input",{type:"text",id:"name",name:"name",placeholder:"Nombre",value:y,onChange:T})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"E-mail",value:g,onChange:T})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"password"},"Contrase\xf1a"),r.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Contrase\xf1a",value:h,onChange:T})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"confirm"},"Confirmar contrase\xf1a"),r.a.createElement("input",{type:"password",id:"confirm",name:"confirm",placeholder:"Confirmar contrase\xf1a",value:k,onChange:T})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:"Registrarse"}))),r.a.createElement(l.b,{to:"/new-account",className:"enlace-cuenta"},"Ya ten\xe9s una cuenta? Inicia sesi\xf3n")))},f=Object(n.createContext)(),j=function(){var e=Object(n.useContext)(f),t=e.form,a=e.toggleForm,c=e.error,o=e.newProject,l=e.showErrorForm,s=Object(n.useState)({name:""}),p=Object(m.a)(s,2),d=p[0],b=p[1],E=d.name;return r.a.createElement(n.Fragment,null,r.a.createElement("button",{type:"button",className:"btn btn-block btn-primario",onClick:function(){return a(!0)}},"Nuevo Proyecto"),t?r.a.createElement("form",{className:"formulario-nuevo-proyecto",onSubmit:function(e){e.preventDefault(),""!==E?(o(d),b({name:""})):l()}},r.a.createElement("input",{type:"text",className:"input-text",placeholder:"Nombre del proyecto",name:"name",value:E,onChange:function(e){b(Object(i.a)(Object(i.a)({},d),{},Object(u.a)({},e.target.name,e.target.value)))}}),r.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:"Agregar"}),r.a.createElement("input",{type:"button",className:"btn btn-primario btn-block",value:"Cancelar",onClick:function(){return a(!1)}})):null,c?r.a.createElement("p",{className:"mensaje error"},"El nombre del proyecto es obligatorio"):null)},O=Object(n.createContext)(),v=function(e){var t=e.project,a=Object(n.useContext)(f).getActualProject,c=Object(n.useContext)(O).getProjectTasks;return r.a.createElement("button",{type:"button",className:"btn btn-blank",onClick:function(){return e=t._id,a(e),void c(e);var e}},r.a.createElement("p",{className:"centrar"},t.name))},g=a(69),h=a(68),y=function(){var e=Object(n.useContext)(f),t=e.projects,a=e.msg,c=e.getProjects,o=Object(n.useContext)(d),l=o.alert,s=o.showAlert;return Object(n.useEffect)((function(){a&&(console.log(a.msg),s(a.msg,a.category)),c()}),[]),0===t.length?r.a.createElement("p",{className:"centrar"},"No hay proyectos"):r.a.createElement("ul",{className:"listado-proyectos"},l?r.a.createElement("div",{className:"alerta ".concat(l.category)},l.msg):null,r.a.createElement(g.a,null,t.map((function(e){return r.a.createElement(h.a,{key:e._id,timeout:400,classNames:"proyectos"},r.a.createElement(v,{project:e}))}))))},k=function(){return r.a.createElement("aside",null,r.a.createElement("h1",null,"MM",r.a.createElement("span",null,"Tasks")),r.a.createElement(j,null),r.a.createElement("div",{className:"proyectos"},r.a.createElement("h2",null,"Mis Proyectos"),r.a.createElement(y,null)))},T=function(){var e=Object(n.useContext)(p),t=e.user,a=e.getAuthUser,c=e.logOut;return Object(n.useEffect)((function(){a()}),[]),r.a.createElement("header",{className:"app-header"},t?r.a.createElement("p",{className:"nombre-usuario"},"Hola ",r.a.createElement("span",null,t.name),"!"):null,t?r.a.createElement("nav",{className:"nav-principal"},r.a.createElement("button",{className:"btn btn-blank cerrar-sesion log-out",onClick:function(){return c()}},"Cerrar sesi\xf3n")):null)},w=function(){var e=Object(n.useContext)(f).actualProject,t=Object(n.useContext)(O),a=t.actualTask,c=t.taskError,o=t.newTask,l=t.validateTask,s=t.getProjectTasks,p=t.updateTask;Object(n.useEffect)((function(){j(null!==a?a:{name:""})}),[a]);var d=Object(n.useState)({name:""}),b=Object(m.a)(d,2),E=b[0],j=b[1],v=E.name;if(!e)return null;var g=Object(m.a)(e,1)[0];return r.a.createElement("div",{className:"formulario"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==v.trim()?(null===a?(E.project=g._id,o(E)):p(E),s(g._id),j({name:""})):l()}},r.a.createElement("div",{className:"contenedor-input"},r.a.createElement("input",{type:"text",className:"input-text",placeholder:"Nombre tarea",name:"name",value:v,onChange:function(e){j(Object(i.a)(Object(i.a)({},E),{},Object(u.a)({},e.target.name,e.target.value)))}})),r.a.createElement("div",{className:"contenedor-input"},r.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:a?"Editar Tarea":"Agregar tarea"}))),c?r.a.createElement("p",{className:"mensaje error"},"El nombre de la tarea es obligatorio"):null)},N=function(e){var t=e.task,a=Object(n.useContext)(f).actualProject,c=Object(n.useContext)(O),o=c.deleteTask,l=c.getProjectTasks,s=c.updateTask,u=c.getActualTask,i=Object(m.a)(a,1)[0],p=function(e){e.status?e.status=!1:e.status=!0,console.log("Task:"),console.log(e),s(e)};return r.a.createElement("li",{className:"tarea sombra"},r.a.createElement("p",null,t.name),r.a.createElement("div",{className:"estado"},t.status?r.a.createElement("button",{type:"button",className:"completo",onClick:function(){return p(t)}},"Completo"):r.a.createElement("button",{type:"button",className:"incompleto",onClick:function(){return p(t)}},"Incompleto")),r.a.createElement("div",{className:"acciones"},r.a.createElement("button",{type:"button",className:"btn btn-primario",onClick:function(){return function(e){u(e)}(t)}},"Editar"),r.a.createElement("button",{type:"button",className:"btn btn-secundario",onClick:function(){return e=t._id,o(e,i._id),void l(i.id);var e}},"Eliminar")))},C=function(){var e=Object(n.useContext)(f),t=e.actualProject,a=e.deleteProject,c=Object(n.useContext)(O).projectTasks;if(!t)return r.a.createElement("h2",null,"Selecciona un proyecto");var o=Object(m.a)(t,1)[0];return r.a.createElement(n.Fragment,null,r.a.createElement("h2",null,"Proyecto: ",o.name),r.a.createElement("ul",{className:"listado-tareas"},0===c.length?r.a.createElement("li",{className:"tarea"},r.a.createElement("p",null,"No hay tareas")):r.a.createElement(g.a,null,c.map((function(e){return r.a.createElement(h.a,{key:e.id,timeout:400,classNames:"tarea"},r.a.createElement(N,{task:e}))})))),r.a.createElement("button",{type:"button",className:"btn btn-eliminar",onClick:function(){return a(o._id)}},"Eliminar proyecto \xd7"))},x=function(){var e=Object(n.useContext)(p).getAuthUser,t=Object(n.useState)({windowWidth:0,windowHeight:0}),a=Object(m.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){e();var t="undefined"!==typeof window?window.innerWidth:0,a="undefined"!==typeof window?window.innerHeight:0;o({windowWidth:t,windowHeight:a})}),[]),r.a.createElement("div",{className:"contenedor-app"},c.windowWidth<768?null:r.a.createElement(k,null),r.a.createElement("div",{className:"seccion-principal"},r.a.createElement(T,null),r.a.createElement("main",null,r.a.createElement(w,null),r.a.createElement("div",{className:"contenedor-tareas"},r.a.createElement(C,null)))),c.windowWidth<768?r.a.createElement(k,null):null)},_=a(4),S=a.n(_),A=a(10),P=a(19),L=function(e,t){switch(t.type){case"FORM_PROJECT":return Object(i.a)(Object(i.a)({},e),{},{form:t.payload});case"GET_PROJECTS":return Object(i.a)(Object(i.a)({},e),{},{projects:t.payload});case"NEW_PROJECT":return Object(i.a)(Object(i.a)({},e),{},{projects:[].concat(Object(P.a)(e.projects),[t.payload]),form:!1,error:!1});case"VALIDATE_FORM":return Object(i.a)(Object(i.a)({},e),{},{error:!0});case"ACTUAL_PROJECT":return Object(i.a)(Object(i.a)({},e),{},{actualProject:e.projects.filter((function(e){return e._id===t.payload}))});case"DELETE_PROJECT":return Object(i.a)(Object(i.a)({},e),{},{projects:e.projects.filter((function(e){return e._id!==t.payload})),actualProject:null});case"PROJECT_ERROR":return Object(i.a)(Object(i.a)({},e),{},{msg:t.payload});default:return e}},I=a(34),R=a.n(I).a.create({baseURL:"https://mmtasks-server.herokuapp.com/"}),F=function(e){var t=Object(n.useReducer)(L,{projects:[],form:!1,error:!1,actualProject:null,msg:null}),a=Object(m.a)(t,2),c=a[0],o=a[1],l=function(){var e=Object(A.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.get("/api/projects");case 3:t=e.sent,o({type:"GET_PROJECTS",payload:t.data.projects}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(A.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.post("/api/projects",t);case 3:a=e.sent,o({type:"NEW_PROJECT",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(A.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.delete("api/projects/".concat(t));case 3:o({type:"DELETE_PROJECT",payload:t}),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),o({type:"PROJECT_ERROR",payload:{msg:"Hubo un error",category:"alerta-error"}});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(f.Provider,{value:{projects:c.projects,form:c.form,error:c.error,actualProject:c.actualProject,msg:c.msg,toggleForm:function(e){o({type:"FORM_PROJECT",payload:e})},getProjects:l,newProject:s,showErrorForm:function(){o({type:"VALIDATE_FORM"})},getActualProject:function(e){o({type:"ACTUAL_PROJECT",payload:e})},deleteProject:u}},e.children)},U=function(e,t){switch(t.type){case"PROJECT_TASKS":return console.log(t.payload),Object(i.a)(Object(i.a)({},e),{},{projectTasks:t.payload});case"NEW_TASK":return Object(i.a)(Object(i.a)({},e),{},{projectTasks:[].concat(Object(P.a)(e.projectTasks),[t.payload]),taskError:!1});case"VALIDATE_TASK":return Object(i.a)(Object(i.a)({},e),{},{taskError:!0});case"DELETE_TASK":return Object(i.a)(Object(i.a)({},e),{},{projectTasks:e.projectTasks.filter((function(e){return e._id!==t.payload}))});case"UPDATE_TASK":return Object(i.a)(Object(i.a)({},e),{},{projectTasks:e.projectTasks.map((function(e){return e._id===t.payload._id?t.payload:e})),actualTask:null});case"ACTUAL_TASK":return Object(i.a)(Object(i.a)({},e),{},{actualTask:t.payload});default:return e}},D=function(e){var t=Object(n.useReducer)(U,{projectTasks:[],taskError:!1,actualTask:null}),a=Object(m.a)(t,2),c=a[0],o=a[1],l=function(){var e=Object(A.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.get("api/tasks",{params:{project:t}});case 3:a=e.sent,o({type:"PROJECT_TASKS",payload:a.data.tasks}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(A.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.post("/api/tasks",t);case 3:a=e.sent,o({type:"NEW_TASK",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(A.a)(S.a.mark((function e(t,a){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.delete("/api/tasks/".concat(t),{params:{project:a}});case 3:o({type:"DELETE_TASK",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),i=function(){var e=Object(A.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.put("/api/tasks/".concat(t._id),t);case 3:a=e.sent,console.log(a.data),o({type:"UPDATE_TASK",payload:a.data.taskExists}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(O.Provider,{value:{projectTasks:c.projectTasks,taskError:c.taskError,actualTask:c.actualTask,getProjectTasks:l,newTask:s,validateTask:function(){o({type:"VALIDATE_TASK"})},deleteTask:u,getActualTask:function(e){o({type:"ACTUAL_TASK",payload:e})},updateTask:i}},e.children)},J=function(e,t){switch(t.type){case"SHOW_ALERT":return{alert:t.payload};case"HIDE_ALERT":return{alert:null};default:return e}},G=function(e){var t=Object(n.useReducer)(J,{alert:null}),a=Object(m.a)(t,2),c=a[0],o=a[1];return r.a.createElement(d.Provider,{value:{alert:c.alert,showAlert:function(e,t){o({type:"SHOW_ALERT",payload:{msg:e,category:t}}),setTimeout((function(){o({type:"HIDE_ALERT"})}),4e3)}}},e.children)},W=function(e,t){switch(t.type){case"SUCCESSFULL_SIGNIN":case"SUCCESSFULL_LOGIN":return localStorage.setItem("token",t.payload.token),Object(i.a)(Object(i.a)({},e),{},{auth:!0,msg:null,loading:!1});case"LOG_OUT":case"FAILED_LOGIN":case"FAILED_SIGNIN":return localStorage.removeItem("token"),Object(i.a)(Object(i.a)({},e),{},{token:null,user:null,auth:null,msg:t.payload});case"GET_USER":return Object(i.a)(Object(i.a)({},e),{},{auth:!0,user:t.payload,loading:!1});default:return e}},K=function(e){e?R.defaults.headers.common["x-auth-token"]=e:delete R.defaults.headers.common["x-auth-token"]},H=function(e){var t={token:localStorage.getItem("token"),auth:null,user:null,msg:null,loading:!0},a=Object(n.useReducer)(W,t),c=Object(m.a)(a,2),o=c[0],l=c[1],s=function(){var e=Object(A.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.post("/api/users",t);case 3:a=e.sent,l({type:"SUCCESSFULL_SIGNIN",payload:a.data}),u(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),n={msg:e.t0.response.data.msg,category:"alerta-error"},l({type:"FAILED_SIGNIN",payload:n});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(A.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=localStorage.getItem("token"))&&K(t),e.prev=2,e.next=5,R.get("/api/auth");case 5:a=e.sent,l({type:"GET_USER",payload:a.data.user}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),l({type:"FAILED_LOGIN"});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(A.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.post("/api/auth",t);case 3:a=e.sent,console.log(a),l({type:"SUCCESSFULL_LOGIN",payload:a.data}),u(),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response.data.msg),n={msg:e.t0.response.data.msg,category:"alerta-error"},l({type:"FAILED_LOGIN",payload:n});case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(p.Provider,{value:{token:o.token,auth:o.auth,user:o.user,msg:o.msg,loading:o.loading,signInUser:s,logIn:i,getAuthUser:u,logOut:function(){l({type:"LOG_OUT"})}}},e.children)},M=a(35),V=function(e){var t=e.component,a=Object(M.a)(e,["component"]),c=Object(n.useContext)(p),o=c.auth,l=c.loading,u=c.getAuthUser;return Object(n.useEffect)((function(){u()}),[]),r.a.createElement(s.b,Object.assign({},a,{render:function(e){return o||l?r.a.createElement(t,e):r.a.createElement(s.a,{to:"/"})}}))},B=localStorage.getItem("token");B&&K(B);var Y=function(){return r.a.createElement(F,null,r.a.createElement(D,null,r.a.createElement(G,null,r.a.createElement(H,null,r.a.createElement(l.a,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",component:b}),r.a.createElement(s.b,{exact:!0,path:"/new-account",component:E}),r.a.createElement(V,{exact:!0,path:"/projects",component:x})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.1f989d31.chunk.js.map